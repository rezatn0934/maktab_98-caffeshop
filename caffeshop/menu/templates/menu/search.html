{% extends 'base.html' %}
{% load static %}

{% block link %}
    <link href="https://cdn.bootstrapcdn.com/bootstrap/5.0.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
{% endblock %}
<style>
    .card {
        background-color: rgba(0, 0, 0, .2);
        border: none;
        border-radius: 0;
    }

    .form-control {
        background-color: rgba(255, 255, 255, .8);
        border: none;
        border-radius: 0;
        color: #333;
        font-size: 14px;
    }

    .btn-primary {
        background-color: #2F4F4F;
        border-color: #2F4F4F;
        border-radius: 0;
        color: #fff;
        font-size: 14px;
    }

    .btn-primary:hover {
        background-color: #556B2F;
        border-color: #556B2F;
        color: #fff;
    }

    .bi {
        font-size: 1.2rem;
    }

    .form-check-input {
        margin-left: 0;
        margin-right: 5px;
    }
</style>

{% block order_number %} {{ request.COOKIES.number_of_order_items }} {% endblock %}

{% block content %}
    <div class="pb-5 pt-3 mb-5">
        <div id="portfolio">
            <div class="section-title text-center center">
                <div class="overlay">
                    <h2>Search</h2>
                    <hr>
                    <p>The Best quality what you deserve.</p>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row d-flex justify-content-center">
                <div class="col-md-8">
                    <div class="card p-3 py-4 text-center" style="background: rgba(142,182, 64, .4)">
                        <form action="{% url 'menu:search' %}" method="GET">
                            <div class="row g-3 mt-2 justify-content-center">
                                <div class="col-md-8 justify-content-center d-flex">
                                    <label class="form-label" for="form2"></label>
                                    <input type="text" class="form-control" id="form2" name="search"
                                           placeholder="Enter product name or description or category">
                                </div>
                                <div class="col-md-2">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-3">
                                <a class="btn btn-outline-primary" data-bs-toggle="collapse" href="#collapseExample"
                                   role="button" aria-expanded="false" aria-controls="collapseExample" style="color: #1a1d20 !important;"> Advance Search
                                    <i class="bi bi-arrow-down"></i>
                                </a>
                                <div class="collapse" id="collapseExample">
                                    <div class="card card-body">
                                        <div class="row mx-2">
                                            <div class="col-md-4 form-check d-flex">
                                                <input class="form-check-input mt-1" type="checkbox" name="checkbox"
                                                       value="a"
                                                       id="flexCheckDefault">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Search in product title
                                                </label>
                                            </div>
                                            <div class="col-md-4 form-check d-flex">
                                                <input class="form-check-input mt-1" type="checkbox" name="checkbox"
                                                       value="b"
                                                       id="flexCheckChecked">
                                                <label class="form-check-label" for="flexCheckChecked">
                                                    Search in product description
                                                </label>
                                            </div>
                                            <div class="col-md-4 form-check">
                                                <input class="form-check-input mt-1" type="checkbox" name="checkbox"
                                                       value="c"
                                                       id="flexCheckChecked">
                                                <label class="form-check-label" for="flexCheckChecked">
                                                    Search in product category
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="portfolio-items pp-gallery row justify-content-between">
                    {% if products %}
                        {% for product in products %}
                            <div class="col-sm-6 col-md-6 col-lg-4 {{ product.category.parent_category.parent_category.parent_category.name|cut:' ' }} {{ product.category.parent_category.parent_category.name|cut:' ' }} {{ product.category.parent_category.name|cut:' ' }} {{ product.category.name|cut:' ' }}">
                                <div class="portfolio-item container">
                                    <div class="hover-bg"
                                         style="border: 1px solid black; border-radius: 10px 10px 0 0;">
                                        {% if product.image %}
                                            <a href="{% url 'menu:show_product'  product.name %}"
                                               title="{{ product.category }}" data-lightbox-gallery="gallery1">
                                                <div class="hover-text">
                                                    <h4 style="color: chartreuse !important;">{{ product.name }}</h4>
                                                </div>
                                                <img src="{{ product.image.url }}" width="500" height="333"
                                                     class="img-responsive" alt="Project Title"
                                                     style="max-width: 100%; max-height: 100%;">
                                            </a>
                                        {% else %}
                                            <a href="#" title="{{ product.category }}" data-lightbox-gallery="gallery1">
                                                <div class="hover-text">
                                                    <h4 style="color: chartreuse !important;">{{ product.name }}</h4>
                                                </div>
                                                <img src="#" width="500" height="333" class="img-responsive"
                                                     alt="Project Title" style="max-width: 100%; max-height: 100%;">
                                            </a>
                                        {% endif %}
                                    </div>
                                    <div class="container mx-0 px-lg-5 justify-content-center"
                                         style="background-color: rgba(233, 33, 220, 0); border: 1px solid black; border-radius: 0 0 10px 10px; max-width: 100%; max-height: 100%;">
                                        <form action="{% url 'menu:menu' %}" class=" row px-5 py-1" method="post"
                                              style="width: fit-content;">
                                            {% csrf_token %}
                                            <input type="hidden" name="product" value="{{ product.id }}">
                                            <span class="co-sm-1 text-center">{{ product.name }}</span>
                                            <span class="co-sm-1 text-center">{{ product.price }} <span>$</span></span>
                                            <!-- <span class="co-sm-1 text-center">Qnt</span> -->
                                            <span><input placeholder="Qnt" class="col-sm-1 my-3 text-center  qnt"
                                                         type="number" min="0" max="{{ product.quantity }}"
                                                         name="quantity"
                                                         value="1"
                                                         style="width: 100%; border-radius: 5px; color: #00014f; font-weight: bold; background-color: rgb(255, 255, 255);"></span>
                                            <input type="submit" class="btn btn-cart moving-btn1 heart col-sm-1  "
                                                   style="border-radius: 10px; color: rgb(3, 0, 38) !important; background-color: rgba(16, 3, 87, 0.142); width: 100%;"
                                                   value="Add to cart">

                                        </form>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
